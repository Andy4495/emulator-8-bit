# Run make action

name: Build

on: 
  push:
  workflow_dispatch:
    inputs:
      message:
        description: Message to display in job summary
        required: false
        type: string

jobs:
  build: 
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@main
      - name: install cloc
        run: |
          git clone https://github.com/AlDanial/cloc.git
          echo "```"  >$GITHUB_STEP_SUMMARY
          ./cloc/cloc . >>$GITHUB_STEP_SUMMARY
          echo "```"  >>$GITHUB_STEP_SUMMARY
      - name: make clean
        run: | 
          make clean
      - name:  make verbose
        run: |
          make verbose
      - name: Print the job summary
        if: ${{ inputs.message }}
        run: |
          echo ${{ inputs.message }} >>$GITHUB_STEP_SUMMARY
